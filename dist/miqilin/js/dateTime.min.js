!function(o){"use strict";"function"==typeof define&&define.amd?define(["jquery"],o):o(jQuery)}(function(r){var c,l=[31,29,31,30,31,30,31,31,30,31,30,31],d=[31,28,31,30,31,30,31,31,30,31,30,31],i=new Date,h=i.getFullYear(),m=i.getMonth(),f=i.getDate(),g=i.getHours(),y=i.getMinutes(),T=null,M={type:"date",background:"#494a4a"},e=!1;r.extend(r.fn,{datetime:function(s){return this.each(function(){function a(){var o,t,i="",e=(o=m,0==(t=h)%4&&0!=t%100||0==t%400?l[o]:d[o]);e<f&&(f=e),console.log(f);for(var n=new Date(h,m,1).getDay(),p=0;p<n;p++)i+="<li></li>";for(p=1;p<=e;p++)i+="<li "+(p==f?"class = 'curDay'":"")+">"+p+"</li>";r("#dayDat").html(i)}function u(){for(var o="",t="",i=0;i<24;i++)i<10&&(i="0"+i),o+=i==g?"<li class='cur'>"+i+"</li>":"<li>"+i+"</li>";for(i=0;i<60;i++)i<10&&(i="0"+i),t+=i==y?"<li class='cur'>"+i+"</li>":"<li>"+i+"</li>";r("#selHour ol").html(o),r("#selMinute ol").html(t)}function t(){var o,t,i=c.type;o="date"==i?h+"-"+(parseInt(m)+1)+"-"+f:"time"==i?g+":"+y:h+"-"+(parseInt(m)+1)+"-"+f+" "+g+":"+y,T.val(o),r(".dateTimeWrap").hide(),c.success&&"function"==typeof c.success&&(t="date"==i?[h,parseInt(m)+1,parseInt(f)]:"time"==i?[g,y]:[h,parseInt(m)+1,parseInt(f),g,y],c.success(t))}var o,v=r(this);c=r.extend(!0,{},M,s),e||(o=r('<div class="dateTimeWrap"><div class="datePart"><div class="dateTimeHead"><span year="2019" month="7" id="dateTime"><select class="year" name="yearSelect" id="yearSelect"><option value="1920">1920年</option><option value="1921">1921年</option><option value="1922">1922年</option><option value="1923">1923年</option><option value="1924">1924年</option><option value="1925">1925年</option><option value="1926">1926年</option><option value="1927">1927年</option><option value="1928">1928年</option><option value="1929">1929年</option><option value="1930">1930年</option><option value="1931">1931年</option><option value="1932">1932年</option><option value="1933">1933年</option><option value="1934">1934年</option><option value="1935">1935年</option><option value="1936">1936年</option><option value="1937">1937年</option><option value="1938">1938年</option><option value="1939">1939年</option><option value="1940">1940年</option><option value="1941">1941年</option><option value="1942">1942年</option><option value="1943">1943年</option><option value="1944">1944年</option><option value="1945">1945年</option><option value="1946">1946年</option><option value="1947">1947年</option><option value="1948">1948年</option><option value="1949">1949年</option><option value="1950">1950年</option><option value="1951">1951年</option><option value="1952">1952年</option><option value="1953">1953年</option><option value="1954">1954年</option><option value="1955">1955年</option><option value="1956">1956年</option><option value="1957">1957年</option><option value="1958">1958年</option><option value="1959">1959年</option><option value="1960">1960年</option><option value="1961">1961年</option><option value="1962">1962年</option><option value="1963">1963年</option><option value="1964">1964年</option><option value="1965">1965年</option><option value="1966">1966年</option><option value="1967">1967年</option><option value="1968">1968年</option><option value="1969">1969年</option><option value="1970">1970年</option><option value="1971">1971年</option><option value="1972">1972年</option><option value="1973">1973年</option><option value="1974">1974年</option><option value="1975">1975年</option><option value="1976">1976年</option><option value="1977">1977年</option><option value="1978">1978年</option><option value="1979">1979年</option><option value="1980">1980年</option><option value="1981">1981年</option><option value="1982">1982年</option><option value="1983">1983年</option><option value="1984">1984年</option><option value="1985">1985年</option><option value="1986">1986年</option><option value="1987">1987年</option><option value="1988">1988年</option><option value="1989">1989年</option><option value="1990">1990年</option><option value="1991">1991年</option><option value="1992">1992年</option><option value="1993">1993年</option><option value="1994">1994年</option><option value="1995">1995年</option><option value="1996">1996年</option><option value="1997">1997年</option><option value="1998">1998年</option><option value="1999">1999年</option><option value="2000">2000年</option><option value="2001">2001年</option><option value="2002">2002年</option><option value="2003">2003年</option><option value="2004">2004年</option><option value="2005">2005年</option><option value="2006">2006年</option><option value="2007">2007年</option><option value="2008">2008年</option><option value="2009">2009年</option><option value="2010">2010年</option><option value="2011">2011年</option><option value="2012">2012年</option><option value="2013">2013年</option><option value="2014">2014年</option><option value="2015">2015年</option><option value="2016">2016年</option><option value="2017">2017年</option><option value="2018">2018年</option><option value="2019">2019年</option><option value="2020">2020年</option><option value="2021">2021年</option><option value="2022">2022年</option><option value="2023">2023年</option><option value="2024">2024年</option><option value="2025">2025年</option><option value="2026">2026年</option><option value="2027">2027年</option><option value="2028">2028年</option><option value="2029">2029年</option><option value="2030">2030年</option><option value="2031">2031年</option><option value="2032">2032年</option><option value="2033">2033年</option><option value="2034">2034年</option><option value="2035">2035年</option><option value="2036">2036年</option><option value="2037">2037年</option><option value="2038">2038年</option><option value="2039">2039年</option><option value="2040">2040年</option><option value="2041">2041年</option><option value="2042">2042年</option><option value="2043">2043年</option><option value="2044">2044年</option><option value="2045">2045年</option><option value="2046">2046年</option><option value="2047">2047年</option><option value="2048">2048年</option><option value="2049">2049年</option><option value="2050">2050年</option></select><select class="month" name="monthSelect" id="monthSelect"><option value="0">一月</option><option value="1">二月</option><option value="2">三月</option><option value="3">四月</option><option value="4">五月</option><option value="5">六月</option><option value="6">七月</option><option value="7">八月</option><option value="8">九月</option><option value="9">十月</option><option value="10">十一月</option><option value="11">十二月</option></select></span><div class="changeMonth"><span id="pre"><</span> <span id="next">></span></div></div><div><ul><li>日</li><li>一</li><li>二</li><li>三</li><li>四</li><li>五</li><li>六</li></ul><ul id="dayDat"></ul></div><div class="dateTimeFoot"><span class="selTime">选择时间</span><span id="close">关闭</span><span id="selcurday">今天</span></div></div><div class="timePart" style="display:none"><ul><li id="selHour"><p>时</p><ol></ol></li><li id="selMinute"><p>分</p><ol></ol></li></ul><div class="timeFooter"><span class="selTime">选择日期</span><span id="ensure">确定</span><span id="curTime">当前时间</span></div></div></div>'),r("body").append(o),e=!0),r("#selcurday,#close,#dayDat,.changeMonth span,.selTime").unbind("click"),r("#yearSelect,#monthSelect").unbind("change"),r("#yearSelect,#monthSelect").change(function(){m=r("#monthSelect").val(),h=r("#yearSelect").val(),a()}),r(".changeMonth span").click(function(){"pre"==this.id?-1==--m&&(m=11,--h):12==(m+=1)&&(m=0,h+=1),a(),r("#yearSelect").val(h),r("#monthSelect").val(m)}),r("#selcurday").click(function(){var o=new Date;h=o.getFullYear(),m=o.getMonth(),f=o.getDate(),a(),r("#yearSelect").val(h),r("#monthSelect").val(m),"datetime"!=c.type?t():r(".datePart").hide().siblings(".timePart").show()}),r("#close").click(function(){r(".dateTimeWrap").hide()}),r("#dayDat").on("click","li",function(){f=r(this).html(),"datetime"!=c.type?t():r(".datePart").hide().siblings(".timePart").show()}),r(".selTime").click(function(){"选择时间"==r(this).html()?r(".datePart").hide().siblings(".timePart").show():r(".datePart").show().siblings(".timePart").hide()}),r(".timePart ol,.timeFooter #ensure,.timeFooter #curTime").unbind("click"),r(".timePart ol").on("click","li",function(){r(this).addClass("cur").siblings("li").removeClass("cur");var o=r(this).parent();o.animate({scrollTop:r(this).offset().top-o.offset().top+o.scrollTop()-r(this).outerHeight()},100)}),r(".timeFooter #ensure").click(function(){g=r("#selHour ol .cur").html(),y=r("#selMinute ol .cur").html(),t(),r(".dateTimeWrap").hide()}),r(".timeFooter #curTime").click(function(){g=i.getHours(),y=i.getMinutes(),parseInt(g)<10&&(g="0"+g),parseInt(y)<10&&(y="0"+y),u(),t()}),v.click(function(){if(c=r.extend(!0,{},M,s),o=c.type,t=c.value,i=!0,t&&0<t.length&&("datetime"==o&&(5!=t.length||2050<t[0]||t[0]<1920||12<t[1]||t[1]<1||31<t[2]||t[2]<1||23<t[3]||t[3]<1||59<t[4]||t[4]<1)&&(i=!1),"date"==o&&(3!=t.length||2050<t[0]||t[0]<1920||12<t[1]||t[1]<1||31<t[2]||t[2]<1)&&(i=!1),"time"==o&&(2!=t.length||23<t[0]||t[0]<1||59<t[1]||t[1]<1)&&(i=!1)),!i)return alert("参数错误"),!1;var o,t,i,e=this.value;if(e){e=e.replace(/-/g,"/");var n=new Date(e)}"date"==c.type?f=this.value?(m=n.getMonth(),h=n.getFullYear(),n.getDate()):(m=c.value[1]-1,h=c.value[0],c.value[2]):"time"==c.type?this.value?(g=this.value.split(":")[0],y=this.value.split(":")[1]):(y=c.value[1],g=c.value[0]):this.value?(m=n.getMonth(),h=n.getFullYear(),f=n.getDate(),g=n.getHours(),y=n.getMinutes()):(m=c.value[1]-1,h=c.value[0],f=c.value[2],y=c.value[4],g=c.value[3]),T=r(this),function(){r(".dateTimeWrap").show();var o=c.type;if("date"!=o){u(),r(".datePart").hide().siblings(".timePart").show();var t=r("#selHour .cur");r("#selHour ol").scrollTop(t.offset().top-r("#selHour ol").offset().top+r("#selHour ol").scrollTop()-t.outerHeight());var i=r("#selMinute .cur");r("#selMinute ol").scrollTop(i.offset().top-r("#selMinute ol").offset().top+r("#selMinute ol").scrollTop()-i.outerHeight())}"time"!=o&&(a(),r(".datePart").show().siblings(".timePart").hide(),r("#yearSelect").val(h),r("#monthSelect").val(m)),"datetime"==o?r(".selTime").show():r(".selTime").hide()}();var p=v.offset().left,l=v.offset().top+v.outerHeight()+4;r(".dateTimeWrap").css({background:c.background,top:l,left:p})})}),this}})});